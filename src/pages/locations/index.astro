---
import BaseLayout from '../../layouts/BaseLayout.astro';
import HeroWithLeadForm from '../../components/HeroWithLeadForm.astro';
import { BRAND } from '../../data/brand';
import { LOCATIONS } from '../../data/locations';
import { SERVICES } from '../../data/services';
import { getBreadcrumbSchema, getWebPageSchema, serializeSchema } from '../../utils/schema';

// SEO-optimized title (50-60 chars)
const title = `Locations | Drainage Services Greater Manchester`;

// SEO-optimized description (120-155 chars) with benefits and CTA
const description = `Professional drain services across Manchester, Salford, Bolton, Stockport and beyond. No call-out fee, local engineers, 24/7. Call ${BRAND.phoneFormatted}.`;

const breadcrumbItems = [
  { name: "Home", url: "/" },
  { name: "Locations", url: "/locations/" }
];

const breadcrumbSchema = getBreadcrumbSchema(breadcrumbItems);
const webPageSchema = getWebPageSchema({
  url: '/locations/',
  name: title,
  description: description,
  breadcrumb: breadcrumbItems
});

const combinedPageSchema = [breadcrumbSchema, webPageSchema];
---

<BaseLayout title={title} description={description} canonical="/locations/" image="/og/locations-og.jpg" schema={combinedPageSchema}>
  <HeroWithLeadForm
    title="Areas We Cover"
    description="Professional drainage services across Manchester & Greater Manchester. Fast response, local engineers, 24/7 availability."
    formId="locations-lead-form"
    source="locations"
  />

  <!-- Introduction -->
  <section class="section-padding">
    <div class="container-wide px-4">
      <nav class="text-sm mb-6" aria-label="Breadcrumb">
        <a href="/" class="text-primary hover:underline">Home</a>
        <span class="mx-2 text-muted-foreground">/</span>
        <span class="text-muted-foreground">Locations</span>
      </nav>
      <div class="max-w-4xl mx-auto text-center">
        <p class="text-xl md:text-2xl text-muted-foreground leading-relaxed mb-6">
          {BRAND.brandName} is proud to serve homeowners and businesses throughout {BRAND.serviceAreaLabel} and the surrounding areas. Whether you're dealing with a blocked drain in central Manchester or need emergency drainage services in Salford, our experienced team is just a phone call away.
        </p>
        <p class="text-lg text-muted-foreground leading-relaxed">
          We offer fast response times across all our service areas, with most call-outs attended within 1-2 hours. Our local knowledge means we understand the specific drainage challenges faced by properties in different parts of {BRAND.serviceAreaLabel}.
        </p>
      </div>
    </div>
  </section>

  <!-- Featured Areas -->
  {['manchester', 'salford', 'stockport', 'bolton'].map((slug, index) => {
    const location = LOCATIONS.find(l => l.slug === slug);
    if (!location) return null;
    const bgClass = index % 2 === 0 ? 'bg-muted/30' : '';
    return (
      <section class={`section-padding ${bgClass}`}>
        <div class="container-wide px-4">
          <div class="max-w-4xl mx-auto">
            <div class="flex items-center gap-3 mb-6">
              <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-primary"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>
              <h2 class="text-3xl md:text-4xl font-bold">{location.name}</h2>
            </div>

            <p class="text-lg text-muted-foreground leading-relaxed mb-8">
              We provide comprehensive drainage services throughout {location.name} and the surrounding areas. Our experienced team understands the local infrastructure and can respond quickly to any drainage emergency.
            </p>

            <div class="grid md:grid-cols-3 gap-4 mb-8">
              <a
                href={`/locations/${location.slug}/blocked-drains/`}
                class="p-4 bg-card rounded-lg border hover:border-primary transition-colors group"
              >
                <h3 class="font-semibold text-lg group-hover:text-primary transition-colors">Blocked Drains {location.name}</h3>
                <p class="text-sm text-muted-foreground mt-2">Fast unblocking for homes & businesses</p>
              </a>

              <a
                href={`/locations/${location.slug}/cctv-drain-surveys/`}
                class="p-4 bg-card rounded-lg border hover:border-primary transition-colors group"
              >
                <h3 class="font-semibold text-lg group-hover:text-primary transition-colors">CCTV Surveys {location.name}</h3>
                <p class="text-sm text-muted-foreground mt-2">Professional drain inspections</p>
              </a>

              <a
                href={`/locations/${location.slug}/emergency-drain-services/`}
                class="p-4 bg-card rounded-lg border hover:border-primary transition-colors group"
              >
                <h3 class="font-semibold text-lg group-hover:text-primary transition-colors">Emergency Services {location.name}</h3>
                <p class="text-sm text-muted-foreground mt-2">24/7 emergency call-outs</p>
              </a>
            </div>

            <a
              href={`/locations/${location.slug}/`}
              class="inline-flex items-center gap-2 text-primary font-semibold hover:underline"
            >
              View all {location.name} drainage services
              <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>
            </a>
          </div>
        </div>
      </section>
    );
  })}

  <!-- All Areas Grid -->
  <section class="section-padding bg-muted/30">
    <div class="container-wide px-4">
      <div class="max-w-4xl mx-auto text-center mb-10">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">All Areas We Cover</h2>
        <p class="text-lg text-muted-foreground">
          Click on any location below to see our full range of services available in your area.
        </p>
      </div>

      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 max-w-5xl mx-auto">
        {LOCATIONS.map((location) => (
          <a
            href={`/locations/${location.slug}/`}
            class="flex items-center gap-2 p-4 bg-card rounded-lg card-elevated hover:scale-[1.02] transition-transform"
          >
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-primary shrink-0"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>
            <span class="font-medium">{location.name}</span>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- Why Choose Local -->
  <section class="section-padding">
    <div class="container-wide px-4">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-3xl md:text-4xl font-bold text-center mb-10">Why Choose a Local Drainage Company?</h2>

        <div class="grid md:grid-cols-2 gap-6">
          <div class="flex gap-4">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-primary shrink-0 mt-1"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22,4 12,14.01 9,11.01"></polyline></svg>
            <div>
              <h3 class="font-semibold text-lg mb-2">Faster Response Times</h3>
              <p class="text-muted-foreground">Being based in {BRAND.serviceAreaLabel} means we can reach you quickly - often within the hour for emergencies.</p>
            </div>
          </div>

          <div class="flex gap-4">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-primary shrink-0 mt-1"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22,4 12,14.01 9,11.01"></polyline></svg>
            <div>
              <h3 class="font-semibold text-lg mb-2">Local Knowledge</h3>
              <p class="text-muted-foreground">We understand the specific drainage systems and common issues in properties across {BRAND.serviceAreaLabel}.</p>
            </div>
          </div>

          <div class="flex gap-4">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-primary shrink-0 mt-1"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22,4 12,14.01 9,11.01"></polyline></svg>
            <div>
              <h3 class="font-semibold text-lg mb-2">No Call-Out Charges</h3>
              <p class="text-muted-foreground">As a local company, we don't charge excessive call-out fees. You only pay for the work we do.</p>
            </div>
          </div>

          <div class="flex gap-4">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-primary shrink-0 mt-1"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22,4 12,14.01 9,11.01"></polyline></svg>
            <div>
              <h3 class="font-semibold text-lg mb-2">Building Local Trust</h3>
              <p class="text-muted-foreground">Our reputation is built on recommendations from satisfied customers in your community.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="section-padding bg-primary text-primary-foreground">
    <div class="container-wide px-4 text-center">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">
        Ready to Get Your Drains Sorted?
      </h2>
      <p class="text-xl text-primary-foreground/90 mb-8 max-w-2xl mx-auto">
        Whether you're in Manchester, Salford, or anywhere across Greater Manchester, our local team is just a phone call away.
      </p>
      <a href={`tel:${BRAND.phone}`} class="bg-white text-primary font-semibold px-8 py-4 rounded-lg shadow-lg hover:bg-white/90 transition-all text-lg inline-block">
        Call {BRAND.phoneFormatted}
      </a>
    </div>
  </section>
</BaseLayout>
